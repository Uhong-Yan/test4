<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¡æ³¡ç³–ç¤¾äº¤</title>
    <link rel="stylesheet" href="styles.css"> <!-- é€™è¡Œç”¨ä¾†é€£çµ CSS -->
</head>
<body>
<header class="header">
    <h1>æ³¡æ³¡ç³–ç¤¾äº¤</h1>
    <nav>
        <a href="profile.html" class="profile-button">å€‹äººæª”æ¡ˆ</a>
    </nav>
</header>

<div class="post-section">
    <h2>å‰µå»ºæ–°è²¼æ–‡</h2>
    <textarea id="postContent" placeholder="ä½ åœ¨æƒ³ä»€éº¼ï¼Ÿ" rows="3"></textarea>
    <button onclick="createPost()">ç™¼è¡¨</button>
</div>

<div class="blog-container" id="feedContainer">
    <!-- è²¼æ–‡æœƒé¡¯ç¤ºåœ¨é€™è£¡ -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", loadPosts);

    function createPost() {
        const content = document.getElementById('postContent').value;
        if (content) {
            const post = {
                content: content,
                time: new Date().toLocaleString(),
                likes: 0,
                comments: []
            };

            const posts = JSON.parse(localStorage.getItem("posts")) || [];
            posts.unshift(post);
            localStorage.setItem("posts", JSON.stringify(posts));

            document.getElementById('postContent').value = '';
            loadPosts();
        } else {
            alert('è«‹å¯«äº›å…§å®¹å†ç™¼è¡¨ï¼');
        }
    }

    function loadPosts() {
        const feedContainer = document.getElementById('feedContainer');
        feedContainer.innerHTML = '';
        const posts = JSON.parse(localStorage.getItem("posts")) || [];

        posts.forEach((post, index) => {
            const postCard = document.createElement('div');
            postCard.className = 'post-card';
            postCard.innerHTML = `
                <div class="post-content">
                    <p>${post.content}</p>
                    <span class="post-time">${post.time}</span>
                </div>
                <div class="interaction-buttons">
                    <button onclick="likePost(${index})">ğŸ‘ æŒ‰è®š (${post.likes})</button>
                    <button onclick="toggleCommentSection(${index})">ğŸ’¬ ç•™è¨€</button>
                </div>
                <div class="comments-section" id="comments-${index}" style="display: none;">
                    <textarea id="commentInput-${index}" placeholder="å¯«ä¸‹ä½ çš„ç•™è¨€..." rows="2"></textarea>
                    <button onclick="addComment(${index})">æ·»åŠ ç•™è¨€</button>
                    <div class="comments-list">
                        ${post.comments.map(comment => `<p>${comment}</p>`).join('')}
                    </div>
                </div>
            `;
            feedContainer.appendChild(postCard);
        });
    }

    function likePost(index) {
        const posts = JSON.parse(localStorage.getItem("posts"));
        posts[index].likes += 1;
        localStorage.setItem("posts", JSON.stringify(posts));
        loadPosts();
    }

    function toggleCommentSection(index) {
        const commentSection = document.getElementById(`comments-${index}`);
        commentSection.style.display = commentSection.style.display === "none" ? "block" : "none";
    }

    function addComment(index) {
        const commentInput = document.getElementById(`commentInput-${index}`);
        const comment = commentInput.value;
        if (comment) {
            const posts = JSON.parse(localStorage.getItem("posts"));
            posts[index].comments.push(comment);
            localStorage.setItem("posts", JSON.stringify(posts));
            commentInput.value = '';
            loadPosts();
        } else {
            alert('è«‹å¯«äº›å…§å®¹å†ç•™è¨€ï¼');
        }
    }
</script>
</body>
</html>
